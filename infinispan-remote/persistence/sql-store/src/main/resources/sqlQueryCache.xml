<distributed-cache>
    <encoding media-type="application/x-protostream"/>
    <persistence>
        <query-jdbc-store dialect="POSTGRES"
                          shared="false"
                          read-only="true"
                          key-columns="id">
            <connection-pool connection-url="jdbc:postgresql://localhost:5432/library"
                             username="postgres"
                             password="postgres"
                             driver="org.postgresql.Driver"/>
            <schema message-name="Book" package="library"/>
            <queries
                    select-single="SELECT books.id, books.isbn, title, authors.name,
                     authors.country FROM books
                    JOIN authors ON books.author_id = authors.id
                    WHERE books.id=:id"

                    select-all="SELECT books.id, books.isbn, title, authors.name,
                     authors.country FROM books
                    JOIN authors ON books.author_id = authors.id"

                    size="SELECT COUNT(*) FROM books
                    JOIN authors ON books.author_id = authors.id"
            />
        </query-jdbc-store>
    </persistence>
</distributed-cache>